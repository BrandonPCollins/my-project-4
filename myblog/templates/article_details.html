{% extends 'base.html' %}

{%  block title %}{{ post.title_tag }}{% endblock %}


{%  block content %}
    <h1>{{ post.title }}</h1>
        <small>By: {{ post.author }} - 
            {{ post.author.first_name }} 
            {{ post.author.last_name }}
            - {{ post.post_date }}

            {% if user.is_authenticated %}     
                {% if user.id == post.author.id %}       
                <a href="{% url 'update_post' post.pk %}">(Edit)</a>
                <a href="{% url 'delete_post' post.pk %}">(Delete)</a>
                {% endif %}
            {% endif %}
        </small>
    <hr>
    <br>
    {% if post.header_image %}
        <img src="{{ post.header_image.url }}" alt="">
        
    {% else %}
        <img src="https://res.cloudinary.com/dchgmljz1/image/upload/c_pad,b_auto:predominant,fl_preserve_transparency/v1700538138/placeholder_z66v7a.jpg?_s=public-apps" 
        alt="Placeholder Image" width="600" height="400">

    {% endif %}
     <br><br>
    {{ post.body|safe }}


    <br><br>
    <a href ="{% url 'home' %}" class="btn btn-success">Back</a>
    <br><br>
    <hr>
    <br>
    <form action="{% url 'like_post' post.pk%}" method="POST">
        {% csrf_token %}
        {% if user.is_authenticated %}     

            {% if liked %}
            <button type="submit", name="post_id", value="{{ post.id }}", class="btn btn-danger btn-small">Unlike</button> 
            
            {% else %}
            <button type="submit", name="post_id", value="{{ post.id }}", class="btn btn-primary btn-small">Like</button> 
            
            {% endif %}
        {% else %}
            <small><a href="{% url 'login' %}">Log in to like</a></small>
        {% endif %}
            - {{ total_likes }} Likes
    </form>

{% endblock %}
